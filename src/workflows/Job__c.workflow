<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>Add_Created_Date</fullName>
        <field>Legacy_Created_Date__c</field>
        <formula>CreatedDate</formula>
        <name>Add Created Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Country_Field_Update</fullName>
        <field>BillingCountry__c</field>
        <formula>TEXT( Reporting_Country__c )</formula>
        <name>Country Field Update</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Fill_In_Shipping_Country</fullName>
        <description>Enter shipping country for VAT</description>
        <field>BillingCountry_Shipping__c</field>
        <formula>BillingCountry__c</formula>
        <name>Fill In Shipping Country</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Fill_In_Shipping_Postal_Code</fullName>
        <field>BillingPostalCode_Shipping__c</field>
        <formula>BillingPostalCode__c</formula>
        <name>Fill In Shipping Postal Code</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Fill_in_Shipping_City</fullName>
        <field>BillingCity_Shipping__c</field>
        <formula>BillingCity__c</formula>
        <name>Fill in Shipping City</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Fill_in_Shipping_State</fullName>
        <field>BillingState_Shipping__c</field>
        <formula>BillingState__c</formula>
        <name>Fill in Shipping State</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Fill_in_Shipping_Street</fullName>
        <field>BillingStreet_Shipping__c</field>
        <formula>Account__r.BillingStreet</formula>
        <name>Fill in Shipping Street</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Set_Order_Scheduled_Date</fullName>
        <field>Scheduled_Date__c</field>
        <formula>CreatedDate + 45</formula>
        <name>Set Order Scheduled Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingCity</fullName>
        <field>BillingCity__c</field>
        <formula>Account__r.BillingCity</formula>
        <name>Update BillingCity</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingCity_Shipping</fullName>
        <field>BillingCity_Shipping__c</field>
        <formula>Shipping_Account__r.BillingCity</formula>
        <name>Update BillingCity Shipping</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingCountry</fullName>
        <field>BillingCountry__c</field>
        <formula>Account__r.BillingCountry</formula>
        <name>Update BillingCountry</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingCountry_Shipping</fullName>
        <field>BillingCountry_Shipping__c</field>
        <formula>Shipping_Account__r.BillingCountry</formula>
        <name>Update BillingCountry Shipping</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingPostalCode</fullName>
        <field>BillingPostalCode__c</field>
        <formula>Account__r.BillingPostalCode</formula>
        <name>Update BillingPostalCode</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingPostalCode_Shipping</fullName>
        <field>BillingPostalCode_Shipping__c</field>
        <formula>Shipping_Account__r.BillingPostalCode</formula>
        <name>Update BillingPostalCode Shipping</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingState_Shipping</fullName>
        <field>BillingState_Shipping__c</field>
        <formula>Shipping_Account__r.BillingState</formula>
        <name>Update BillingState Shipping</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_BillingStreet_Shipping</fullName>
        <field>BillingStreet_Shipping__c</field>
        <formula>Shipping_Account__r.BillingStreet</formula>
        <name>Update BillingStreet Shipping</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Order_Partner_Text</fullName>
        <field>Partner_Text__c</field>
        <formula>Partner__r.Name</formula>
        <name>Update Order Partner Text</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Recalculate_Check_Box_On_Order</fullName>
        <field>Recalculate__c</field>
        <literalValue>1</literalValue>
        <name>Update Recalculate Check Box On Order</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>true</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Record_Type_to_Sale_Order</fullName>
        <field>RecordTypeId</field>
        <lookupValue>Sale_Order</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>Update Record Type to Sale Order</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_the_Service_Activation_Date_of_Or</fullName>
        <field>Service_Activation_Date__c</field>
        <formula>Despatch_Date__c + 5</formula>
        <name>Update the Service Activation Date of Or</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>update_BillingState</fullName>
        <field>BillingState__c</field>
        <formula>Account__r.BillingState</formula>
        <name>update BillingState</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <rules>
        <fullName>Create Sale Order</fullName>
        <actions>
            <name>Update_Record_Type_to_Sale_Order</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Job__c.Order_Type_VT__c</field>
            <operation>equals</operation>
            <value>Sale</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Fill In Shipping Address</fullName>
        <actions>
            <name>Fill_In_Shipping_Country</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Fill_In_Shipping_Postal_Code</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Fill_in_Shipping_City</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Fill_in_Shipping_State</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Fill_in_Shipping_Street</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Job__c.Billing_and_Shipping_Address_the_same__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>Job__c.BillingCountry_Shipping__c</field>
            <operation>equals</operation>
        </criteriaItems>
        <description>Fills in the country of the shipping address when it is the same as the billing account (box is checked).</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Insert Created Date</fullName>
        <actions>
            <name>Add_Created_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>TRUE</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>KV Partner Order</fullName>
        <actions>
            <name>Update_Order_Partner_Text</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>User.ProfileId</field>
            <operation>notEqual</operation>
            <value>KV Sales Agent</value>
        </criteriaItems>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Recalculate Values On Order</fullName>
        <actions>
            <name>Update_Recalculate_Check_Box_On_Order</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>(VAT_Roll_Up__c != VAT__c) || ( ISCHANGED(IITIntended_Use__c)) || ISCHANGED( Shipping_Account__c)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Scheduled Date</fullName>
        <actions>
            <name>Set_Order_Scheduled_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Job__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>Child Order,Sale Order</value>
        </criteriaItems>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Update Country Field</fullName>
        <actions>
            <name>Country_Field_Update</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <formula>ISCHANGED( Reporting_Country__c )</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Update Order Address</fullName>
        <actions>
            <name>Update_BillingCity</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_BillingCity_Shipping</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_BillingCountry</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_BillingCountry_Shipping</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_BillingPostalCode</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_BillingPostalCode_Shipping</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_BillingState_Shipping</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_BillingStreet_Shipping</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>update_BillingState</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>true</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Update the Service Activation Date of Order To Despatch Plus Five</fullName>
        <actions>
            <name>Update_the_Service_Activation_Date_of_Or</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Job__c.RecordTypeId</field>
            <operation>notEqual</operation>
            <value>Master Order</value>
        </criteriaItems>
        <criteriaItems>
            <field>Job__c.Despatch_Date__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>Job__c.Service_Activation_Date__c</field>
            <operation>equals</operation>
        </criteriaItems>
        <description>Update the Service Activation Date To Despatch Date + 5</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
</Workflow>
